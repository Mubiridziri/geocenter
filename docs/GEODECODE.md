# Прямое геокодирование

___
### Поисковый запрос объектов по текстовой строке (search)

```
 /**
     * Прямое геокодирование
     * @return JsonResponse
     * @Route("/geodecode", methods={"GET"})
     */
    public function geodecodeAction(GeocenterManager $manager)
    {
        $results = $manager->geodecode("Россия, Челябинская область, городской округ Магнитогорский, г Магнитогорск, ул. Рысакова", (new DecoderContext())
            ->setData(GeodecodeData::DATA_ADDRESS)
            ->setFormat(GeodecodeFormat::SIMPLE_FORMAT)
        );
        return $this->json($results);
    }
```

### Запрос автозаполнения текстовой строки для поиска (suggest)


```
 /**
     * @param GeocenterManager $manager
     * @param Request $request
     * @return JsonResponse
     * @Route("/suggest", methods={"GET"})
     */
    public function suggestAction(GeocenterManager $manager, Request $request)
    {
        $text = $request->query->get('text', '');
        $results = $manager->suggest($text, new LatLng('0', '0'), (new DecoderContext())
            ->setData(GeodecodeData::DATA_ADDRESS)
            ->setFormat(GeodecodeFormat::GEOJSON_SUGGEST_FORMAT)
            ->setLimit(100)
        );
        return $this->json($results);
    }
```

DecoderContext обладает следующими параметрами для уточнения вашего запроса:

| Параметр        | Возможные значения                                                                                                                                                                               | Значение по умолчанию | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|-----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| guid            | текст                                                                                                                                                                                            | &nbsp;                | Ключ лицензии пользователя\.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| text            | текст                                                                                                                                                                                            | &nbsp;                | Строка для поиска\.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| count           | число                                                                                                                                                                                            | 10                    | Максимальное количество возвращаемых результатов\.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| format          | regular</br>			geojson:suggest</br>			geojson:suggestWithCoords</br>			geojson:full</br>			simple                                                                                                | geojson:full          | </br>			Вид результата запроса на выходе:</br></br>			</br>				regular \- основной формат результата поиска, результат в формате GeoJSON;</br>				geojson:suggest – формат результата для запроса автозаполнения текстовой строки для поиска, содержит теги оформления, подсказки смены раскладки клавиатуры, результат в формате GeoJSON;</br>				geojson:suggestWithCoords – формат результата для запроса автозаполнения текстовой строки для поиска, содержит только объекты с координатами и не содержит тегов оформления и подсказок, результат в формате GeoJSON;</br>				geojson:full \- полный перечень показателей для результатов поиска в формате GeoJSON, используется для отладки и может быть изменен по усмотрению разработчика;</br>				simple – упрощенный вариант результатов поиска, содержит только название и координаты найденных объектов, формат \- JSON\.</br>			</br>			                                  |
| mode            | search</br>			geocode                                                                                                                                                                            | search                | </br>			Режим поиска адреса:</br></br>			</br>				search – поиск наиболее подходящего адреса или объекта, максимально совпадающего с поисковой строкой\. Используется для поиска объектов на веб\-сайтах, в пользовательских интерфейсах;</br>				geocode – геокодирование адреса\. Поиск адресов или объектов, максимально совпадающих с поисковой строкой, с более жесткими правилами учета иерархии объектов и ошибок в написании\. Поисковая строка обязательно должна содержать названия регионов, населенных пунктов, для более точной привязки объектов\. Используется для геокодирования хорошо структурированных данных для минимизации возможных ошибок геокодинга\.</br>			</br>			                                                                                                                                                                                                                                       |
| data            | all</br>			address                                                                                                                                                                               | all                   | </br>			Вид данных, среди которых осуществляется поиск:</br></br>			</br>				all \- поиск среди всех доступных объектов;</br>				address \- поиск по адресным данным \(включая улицы, административное деление\)\.</br>			</br>			                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| lang            | ru</br>			en                                                                                                                                                                                     | ru                    | </br>			Язык отображения результатов:</br></br>			</br>				ru \- русский;</br>				en \- английский \(транслитерация\)\.</br>			</br>			                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| spatialin       | </br>EPSG:3857</br>			EPSG:4326</br>			GSK:42</br>			GSK:42\_DIRECT</br>			EPSG:4923</br>			GSK:90</br>			GSK:90\_DIRECT</br>			GSK:9002</br>			GSK:9011</br>			GSK:2011</br>			GSK:2011\_DIRECT | EPSG:4326             | </br>			Координатная система входных данных:</br></br>			</br>				EPSG:4326 – WGS84, десятичные градусы;</br>				EPSG:3857 – Web Mercator Auxiliary Sphere;</br>				GSK:42 – СК42, ГОСТ Р 32453\-2013, переход через ПЗ\-90\.02;</br>				GSK:42\_DIRECT – СК42, ГОСТ 51794\-2001;</br>				EPSG:4923 – ПЗ90, переход по версии EPSG;</br>				GSK:90 – ПЗ90, ГОСТ 51794\-2008 \(Приложение Б\), переход через GSK:42;</br>				GSK:90\_DIRECT – ПЗ90, ГОСТ 51794\-2008 \(Приложение Г\);</br>				GSK:9002 – ПЗ\-90\.02, ГОСТ Р 32453\-2013 \(Приложение В\);</br>				GSK:9011 – ПЗ\-90\.11, справочный документ «Параметры Земли 1990 года» \(ПЗ\-90\.11\) Минобороны России;</br>				GSK:2011 – ГСК2011, ПРИКАЗ от 23 марта 2016 г\. N П/0134 ОБ УТВЕРЖДЕНИИ ПАРАМЕТРОВ ГСК2011, переход через GSK:9011;</br>				GSK:2011\_DIRECT – ГСК2011, ПРИКАЗ от 23 марта 2016 г\. N П/0134 ОБ УТВЕРЖДЕНИИ ПАРАМЕТРОВ ГСК2011\.</br>			</br>			  |
| spatialout      | </br>EPSG:3857</br>			EPSG:4326</br>			GSK:42</br>			GSK:42\_DIRECT</br>			EPSG:4923</br>			GSK:90</br>			GSK:90\_DIRECT</br>			GSK:9002</br>			GSK:9011</br>			GSK:2011</br>			GSK:2011\_DIRECT | EPSG:4326             | </br>			Координатная система выходных данных:</br></br>			</br>				EPSG:4326 – WGS84, десятичные градусы;</br>				EPSG:3857 – Web Mercator Auxiliary Sphere;</br>				GSK:42 – СК42, ГОСТ Р 32453\-2013, переход через ПЗ\-90\.02;</br>				GSK:42\_DIRECT – СК42, ГОСТ 51794\-2001;</br>				EPSG:4923 – ПЗ90, переход по версии EPSG;</br>				GSK:90 – ПЗ90, ГОСТ 51794\-2008 \(Приложение Б\), переход через GSK:42;</br>				GSK:90\_DIRECT – ПЗ90, ГОСТ 51794\-2008 \(Приложение Г\);</br>				GSK:9002 – ПЗ\-90\.02, ГОСТ Р 32453\-2013 \(Приложение В\);</br>				GSK:9011 – ПЗ\-90\.11, справочный документ «Параметры Земли 1990 года» \(ПЗ\-90\.11\) Минобороны России;</br>				GSK:2011 – ГСК2011, ПРИКАЗ от 23 марта 2016 г\. N П/0134 ОБ УТВЕРЖДЕНИИ ПАРАМЕТРОВ ГСК2011, переход через GSK:9011;</br>				GSK:2011\_DIRECT – ГСК2011, ПРИКАЗ от 23 марта 2016 г\. N П/0134 ОБ УТВЕРЖДЕНИИ ПАРАМЕТРОВ ГСК2011\.</br>			</br>			 |
| x               | число                                                                                                                                                                                            | &nbsp;                | Координата X точки в проекции spatialin\. При указании в запросе координат x, y результаты поиска сортируются по релевантности с учетом удаленности от заданной точки\.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| y               | число                                                                                                                                                                                            | &nbsp;                | Координата Y точки в проекции spatialin\. При указании в запросе координат x, y результаты поиска сортируются по релевантности с учетом удаленности от заданной точки\.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| minAddrAccuracy | число                                                                                                                                                                                            | 0                     | Минимальная степень совпадения найденного адреса с введенной текстовой строкой в диапазоне от 0 до 100 для включения его в результаты поиска\.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |

### Константы

Возможные значения полей представлены в виде констант в классах с пространством имен Mubiridziri\Geocenter\Option\*
